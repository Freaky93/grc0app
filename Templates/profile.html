<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Profile - GRC Statements</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root {
    --neon-cyan: #00e0ff;
    --neon-pink: #f756f1;
    --bg-dark: #0a0f1f;
    --bg-gradient: linear-gradient(135deg, #0a0f1f, #102542);
    --text-light: #eaf6ff;
  }

  body {
    margin: 0;
    font-family: "Inter", "Roboto", sans-serif;
    background: var(--bg-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    animation: fadeIn 0.6s ease-in-out;
    color: var(--text-light);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .nav-bar {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 70px;
    background: rgba(10, 20, 50, 0.9);
    display: flex; align-items: center; justify-content: center;
    color: var(--text-light);
    font-size: 1.8rem; font-weight: 700;
    box-shadow: 0 0 15px rgba(255, 0, 247, 0.3);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 40;
    text-shadow: 0 0 8px var(--neon-cyan);
  }

  .card {
    width: 460px;
    margin-top: 90px;
    background: rgba(16, 24, 48, 0.9);
    border-radius: 14px;
    padding: 30px;
    box-shadow: 0 0 25px rgba(255, 0, 247, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    animation: popupIn 0.4s ease-out;
  }

  @keyframes popupIn {
    from { opacity: 0; transform: scale(0.96); }
    to { opacity: 1; transform: scale(1); }
  }

  /* ‚úÖ Headings without glow */
  h2, h4 {
    color: var(--neon-cyan);
    text-align: center;
    text-shadow: none; /* removed neon glow */
  }

  .row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .muted {
    color: #a3b6d3;
  }

  input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #30363d;
    margin-top: 6px;
    background: rgba(15, 22, 40, 0.9);
    color: var(--text-light);
    font-size: 1em;
    transition: all 0.3s ease;
    box-shadow: 0 0 8px rgba(0, 224, 255, 0.1);
  }

  input:focus {
    border-color: var(--neon-pink);
    box-shadow: 0 0 12px var(--neon-pink);
    outline: none;
  }

  .password-display {
    position: relative;
    display: flex;
    align-items: center;
    width: 220px;
  }

  .password-display input {
    flex: 1;
    padding-right: 36px;
  }

  .eye-btn {
    position: absolute;
    right: 6px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--neon-cyan);
    font-size: 18px;
    padding: 6px;
    transition: transform 0.2s ease;
  }

  .eye-btn:hover {
    transform: scale(1.2);
    color: var(--neon-pink);
  }

  .btn {
    margin-top: 12px;
    padding: 12px 14px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(90deg, var(--neon-cyan) 0%, var(--neon-pink) 100%);
    color: #020000;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.25s ease;
    box-shadow: 0 0 15px rgba(255, 0, 247, 0.2);
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 25px var(--neon-pink);
  }

  .logout-btn {
    background: linear-gradient(90deg, #ff6b6b, #ff1a8c);
    color: rgb(0, 0, 0);
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: 0.3s ease;
    box-shadow: 0 0 15px rgba(255, 0, 247, 0.2);
  }

  .logout-btn:hover {
    background: #ff1a8c;
    box-shadow: 0 0 25px #ff1a8c;
  }

  a {
    color: var(--neon-cyan);
    text-decoration: none;
    transition: 0.3s ease;
  }

  a:hover {
    color: var(--neon-pink);
    text-shadow: 0 0 8px var(--neon-pink);
  }

  .msg {
    color: #00e0ff;
    margin-top: 10px;
    text-align: center;
    text-shadow: 0 0 8px var(--neon-cyan);
  }

  .error {
    color: #ff6b6b;
    margin-top: 10px;
    text-align: center;
    text-shadow: 0 0 8px #ff6b6b;
  }

  @media (max-width: 520px) {
    .card { width: 92%; margin-top: 100px; padding: 18px; }
    .password-display { width: 160px; }
  }
</style>


</head>
<body>
  <div class="nav-bar">GRC Statements</div>

  <div class="card" role="region" aria-label="User profile">
    <h2>Your Profile</h2>

    <div class="row">
      <div class="muted">Username</div>
      <div>{{ user.username }}</div>
    </div>

    <div class="row">
      <div class="muted">Email</div>
      <div>{{ user.email }}</div>
    </div>

    <!-- Password row: masked by default, show on eye click -->
    <div class="row" style="align-items:center;">
      <div class="muted">Password</div>
      <div class="password-display" title="Click the eye to hide/show password">
        <input type="password" id="userPassword" value="{{ plain_password or '' }}" readonly>
        <button type="button" class="eye-btn" id="toggleEye" aria-label="Toggle password visibility">üëÅÔ∏è</button>
      </div>
    </div>

    <h4>Update Password</h4>
    <!-- ‚úÖ FORM 1: for changing password -->
    <form method="POST" action="/update_password" style="display:flex; gap:10px; flex-direction:column;">
      <input type="password" id="newPassword" name="new_password" placeholder="Enter new password" required>
      <div class="controls">
        <button class="btn" type="submit">Change Password</button>
      </div>
    </form>

 
   <div class="puppy" style="text-align:center; margin-top:15px;">
    <a href="{{ url_for('dashboard') }}">   Back to Dashboard</a>
  </div>
  
  


    <!-- ‚úÖ FORM 2: for logout (moved OUTSIDE password form) -->
    <form method="GET" action="{{ url_for('logout') }}" style="margin-top:10px; text-align:center;">
      <button class="logout-btn" type="submit">Logout</button>
    </form>

    {% if message %}<div class="msg" role="status">{{ message }}</div>{% endif %}
    {% if error %}<div class="error" role="alert">{{ error }}</div>{% endif %}
  </div>

  <script>
  (function () {
    const input = document.getElementById('userPassword');
    const eyeBtn = document.getElementById('toggleEye');
    if (!input || !eyeBtn) return;

    let visible = false; // masked by default

    function updateEye() {
      eyeBtn.textContent = visible ? 'üôà' : 'üëÅÔ∏è';
      eyeBtn.title = visible ? 'Hide password' : 'Show password';
    }

    eyeBtn.addEventListener('click', () => {
      visible = !visible;
      input.type = visible ? 'text' : 'password';
      updateEye();
    });

    updateEye();
  })();
  </script>

</body>
</html>
